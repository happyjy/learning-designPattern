<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /*
      

      # 자료구조의 tree구조와 같네? 

      * Component 
        - code: Node
      * Leaf
        - code: Node
      * Composite
        - code: Node
    */

    /*


    */


    // POINT1: Node에는 Node의 이름, 자식으로 가질 배열 변수를 갖음
    var Node = function (name) {
      this.children = [];
      this.name = name;
    }

    Node.prototype = {
      /*
        child type: Node 객체
      */
      add: function (child) {
        // POINT2: Node의 기능으로 본인이 가질 자식 노드를 children 배열에 push
        this.children.push(child);
      },


      /*
        child type: Node 객체
      */
      remove: function (child) {
        var length = this.children.length;
        for (var i = 0; i < length; i++) {
          if (this.children[i] === child) {
            this.children.splice(i, 1);
            return;
          }
        }
      },

      /*
        i: int type
      */
      getChild: function (i) {
        return this.children[i];
      },

      hasChildren: function () {
        return this.children.length > 0;
      }
    }

    // recursively traverse a (sub)tree
    function traverse(indent, node) {
      log.add(Array(indent++).join("--") + node.name);

      for (var i = 0, len = node.children.length; i < len; i++) {
        traverse(indent, node.getChild(i));
      }
    }

    var log = (function () {
      var log = '';

      return {
        add: function (msg) { log += msg + '\n' },
        show: function () { console.log(log); log = ''; }
      }
    })()

    function run() {
      var tree = new Node("root");
      var left = new Node("left");
      var right = new Node("right");
      var leftleft = new Node("leftleft");
      var leftright = new Node("leftright");
      var rightleft = new Node("rightleft");
      var rightright = new Node("rightright");

      tree.add(left)
      tree.add(right)
      tree.remove(right) // note: remove
      tree.add(right)

      left.add(leftleft);
      left.add(leftright);

      right.add(rightleft);
      right.add(rightright);

      traverse(1, tree);

      log.show();
    }

    run();
  </script>
</body>

</html>